@startuml actualizacion exitosa del estado
actor responsableDeEtapa
participant interfazDelSistema
participant Controlador
participant servicioDeEtapa
participant baseDeDatos


responsableDeEtapa -> interfazDelSistema: Accede al sistema
activate interfazDelSistema 
interfazDelSistema -> Controlador: Valida Permisos de usuario
activate Controlador
Controlador -> servicioDeEtapa: Verifica estado actual
activate servicioDeEtapa
servicioDeEtapa -> baseDeDatos: Consulta etapa 
activate baseDeDatos
baseDeDatos --> servicioDeEtapa: Confirmacion consulta
deactivate baseDeDatos
servicioDeEtapa --> Controlador: Estado verificado
deactivate servicioDeEtapa
Controlador --> interfazDelSistema: Permisos validados
deactivate Controlador
interfazDelSistema --> responsableDeEtapa: Muestra panel actualizado
deactivate interfazDelSistema

responsableDeEtapa -> interfazDelSistema: seleccionar proyecto 
activate interfazDelSistema
interfazDelSistema -> Controlador: solicita datos de la etapa
activate Controlador
Controlador -> servicioDeEtapa: actualiza servicio de etapa 
activate servicioDeEtapa
servicioDeEtapa -> baseDeDatos: guardar nuevo estado 
activate baseDeDatos
baseDeDatos --> servicioDeEtapa: confirmacion de guardado
deactivate baseDeDatos
servicioDeEtapa --> Controlador: estado actualizado correctamente
deactivate servicioDeEtapa
Controlador --> interfazDelSistema: Permisos validados 
deactivate Controlador
interfazDelSistema --> responsableDeEtapa: Notifica cambio de estado
deactivate interfazDelSistema

responsableDeEtapa -> interfazDelSistema: selecciona etapa y nuevo estado 
activate interfazDelSistema
interfazDelSistema -> Controlador: envia peticion 
activate Controlador
Controlador -> servicioDeEtapa: ejecuta actualizacion 
activate servicioDeEtapa
servicioDeEtapa -> baseDeDatos: registra cambio
activate baseDeDatos
baseDeDatos --> servicioDeEtapa: confirma registro
deactivate baseDeDatos
servicioDeEtapa --> Controlador: actualizacion completada
deactivate servicioDeEtapa 
Controlador --> interfazDelSistema: operacion exitosa
deactivate Controlador
interfazDelSistema --> responsableDeEtapa: envia confirmacion por mail
deactivate interfazDelSistema
@endum